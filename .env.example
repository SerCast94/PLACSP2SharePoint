# ============================================================
# ARCHIVO DE CONFIGURACIÓN PLACSP
# ============================================================
# Copie este archivo a .env y complete sus credenciales.
# Modifique las variables para cambiar el comportamiento
# del programa sin necesidad de recompilar el código.
# ============================================================

# ============================================================
# 1. CONFIGURACIÓN DE URLs DE DESCARGA
# ============================================================

# URLs de las plataformas donde buscar los enlaces de descarga
PLACSP_URL_CONTRATANTE=https://www.hacienda.gob.es/es-es/gobiernoabierto/datos%20abiertos/paginas/licitacionescontratante.aspx
PLACSP_URL_AGREGACION=https://www.hacienda.gob.es/es-es/gobiernoabierto/datos%20abiertos/paginas/licitacionesagregacion.aspx

# ============================================================
# 2. PATRONES DE BÚSQUEDA DE ENLACES
# ============================================================

# Patrón regex para encontrar enlaces de archivos ZIP con formato año-mes
# Ejemplo: _202501.zip -> extrae 202501
ZIP_LINK_PATTERN=_(\\d{6})\\.zip$

# Patrón regex para extraer fecha completa (YYYYMMDD) de nombres de archivo
# Ejemplo: _20251201_170750 -> extrae 20251201
FECHA_COMPLETA_PATTERN=_(\\d{8})_

# Patrón regex para identificar el año-mes en nombres de archivo
# Ejemplo: archivo_202501.atom -> extrae 202501
ANYO_MES_PATTERN=_(\\d{6})\\.

# ============================================================
# 3. DIRECTORIOS LOCALES
# ============================================================

# Directorio base para descargas de archivos ZIP
DOWNLOAD_DIR=descargas

# Directorio donde se guardan los archivos ATOM extraídos
ATOM_DIR=descargas/atom

# Directorio donde se generan los archivos Excel de salida
EXCEL_OUTPUT_DIR=descargas/excel

# ============================================================
# 4. CONFIGURACIÓN DEL PROCESO DE DESCARGA
# ============================================================

# Número de meses de histórico a mantener
# - Si la carpeta atom está vacía: descarga los últimos N ZIPs
# - Limpieza: elimina ATOMs con más de N meses de antigüedad
MESES_HISTORICO=5

# Timeout de conexión HTTP en milisegundos (30 segundos por defecto)
HTTP_CONNECT_TIMEOUT=30000

# Timeout de lectura HTTP en milisegundos (60 segundos por defecto)
HTTP_READ_TIMEOUT=60000

# Tamaño del buffer de descarga en bytes (8KB por defecto)
DOWNLOAD_BUFFER_SIZE=8192

# Intervalo en MB para mostrar progreso de descarga
DOWNLOAD_PROGRESS_INTERVAL_MB=10

# ============================================================
# 5. CONFIGURACIÓN DEL CONVERSOR CLI
# ============================================================

# Comando para ejecutar el conversor PLACSP CLI
CLI_COMMAND=placsp-cli.bat

# Opciones del conversor (true/false)
# Generar dos hojas: licitaciones + resultados
CLI_DOS_TABLAS=true

# Incluir hoja de Encargos a Medios Propios (EMP)
CLI_INCLUIR_EMP=false

# Incluir hoja de Consultas Preliminares del Mercado (CPM)
CLI_INCLUIR_CPM=false

# ============================================================
# 6. CONFIGURACIÓN DE LOGGING
# ============================================================

# Directorio donde se guardan los logs
LOG_DIR=logs

# Nombre del archivo de log
LOG_FILE=placsp.log

# Días máximos de antigüedad para mantener en los logs
MAX_LOG_DAYS=30

# ============================================================
# 7. CONFIGURACIÓN SSL (para entornos de prueba)
# ============================================================

# Desactivar validación SSL (solo para pruebas, false en producción)
SSL_DISABLE_VALIDATION=true

# ============================================================
# 8. NOMBRES DE ARCHIVOS DE SALIDA
# ============================================================

# Nombre base para Excel de Perfiles Contratante
EXCEL_NAME_PERF_CONTRAT=licPerfContratPLACSP

# Nombre base para Excel de Plataformas Agregadas
EXCEL_NAME_AGREGADAS=licPlatafAgregadas

# ============================================================
# 9. CONFIGURACIÓN DE SharePoint (MICROSOFT GRAPH API)
# ============================================================

# ID del Tenant de Azure AD
SHAREPOINT_TENANT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# ID de la Aplicación (Client ID)
SHAREPOINT_CLIENT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Secreto del Cliente (Client Secret)
SHAREPOINT_CLIENT_SECRET=tu-secreto-de-aplicacion

# URL completa del sitio SharePoint (sin trailing slash)
SHAREPOINT_URL=https://tuempresa.sharepoint.com/sites/tu-sitio

# Biblioteca de Documentos (subcarpeta dentro de la biblioteca principal)
SHAREPOINT_LIBRARY=Colaboracion

# ID del Drive (opcional - se detecta automáticamente)
SHAREPOINT_DRIVE_ID=

# Nombres alternativos de bibliotecas SharePoint (para búsqueda automática)
# Se intentan en orden hasta encontrar una que exista
SHAREPOINT_DRIVE_NAMES=Documentos compartidos;Documents;Shared Documents
